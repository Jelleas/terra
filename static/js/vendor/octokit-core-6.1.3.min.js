/* esm.sh - @octokit/core@6.1.3 */
import __Process$ from "./node-process.min.js";
var ae=Object.create;var N=Object.defineProperty;var ce=Object.getOwnPropertyDescriptor;var ue=Object.getOwnPropertyNames;var le=Object.getPrototypeOf,fe=Object.prototype.hasOwnProperty;var pe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var he=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ue(t))!fe.call(e,n)&&n!==r&&N(e,n,{get:()=>t[n],enumerable:!(s=ce(t,n))||s.enumerable});return e};var de=(e,t,r)=>(r=e!=null?ae(le(e)):{},he(t||!e||!e.__esModule?N(r,"default",{value:e,enumerable:!0}):r,e));var M=pe((st,w)=>{"use strict";var A=function(){};A.prototype=Object.create(null);var E=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,O=/\\([\v\u0020-\u00ff])/gu,J=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,d={type:"",parameters:new A};Object.freeze(d.parameters);Object.freeze(d);function Z(e){if(typeof e!="string")throw new TypeError("argument header is required and must be a string");let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim();if(J.test(r)===!1)throw new TypeError("invalid media type");let s={type:r.toLowerCase(),parameters:new A};if(t===-1)return s;let n,o,i;for(E.lastIndex=t;o=E.exec(e);){if(o.index!==t)throw new TypeError("invalid parameter format");t+=o[0].length,n=o[1].toLowerCase(),i=o[2],i[0]==='"'&&(i=i.slice(1,i.length-1),O.test(i)&&(i=i.replace(O,"$1"))),s.parameters[n]=i}if(t!==e.length)throw new TypeError("invalid parameter format");return s}function K(e){if(typeof e!="string")return d;let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim();if(J.test(r)===!1)return d;let s={type:r.toLowerCase(),parameters:new A};if(t===-1)return s;let n,o,i;for(E.lastIndex=t;o=E.exec(e);){if(o.index!==t)return d;t+=o[0].length,n=o[1].toLowerCase(),i=o[2],i[0]==='"'&&(i=i.slice(1,i.length-1),O.test(i)&&(i=i.replace(O,"$1"))),s.parameters[n]=i}return t!==e.length?d:s}w.exports.default={parse:Z,safeParse:K};w.exports.parse=Z;w.exports.safeParse=K;w.exports.defaultContentType=d});function h(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof __Process$=="object"&&__Process$.version!==void 0?`Node.js/${__Process$.version.substr(1)} (${__Process$.platform}; ${__Process$.arch})`:"<environment undetectable>"}function j(e,t,r,s){if(typeof r!="function")throw new Error("method for before hook must be a function");return s||(s={}),Array.isArray(t)?t.reverse().reduce((n,o)=>j.bind(null,e,o,n,s),r)():Promise.resolve().then(()=>e.registry[t]?e.registry[t].reduce((n,o)=>o.hook.bind(null,n,s),r)():r(s))}function P(e,t,r,s){let n=s;e.registry[r]||(e.registry[r]=[]),t==="before"&&(s=(o,i)=>Promise.resolve().then(n.bind(null,i)).then(o.bind(null,i))),t==="after"&&(s=(o,i)=>{let a;return Promise.resolve().then(o.bind(null,i)).then(l=>(a=l,n(a,i))).then(()=>a)}),t==="error"&&(s=(o,i)=>Promise.resolve().then(o.bind(null,i)).catch(a=>n(a,i))),e.registry[r].push({hook:s,orig:n})}function C(e,t,r){if(!e.registry[t])return;let s=e.registry[t].map(n=>n.orig).indexOf(r);s!==-1&&e.registry[t].splice(s,1)}var D=Function.bind,_=D.bind(D);function I(e,t,r){let s=_(C,null).apply(null,r?[t,r]:[t]);e.api={remove:s},e.remove=s,["before","error","after","wrap"].forEach(n=>{let o=r?[t,n,r]:[t,n];e[n]=e.api[n]=_(P,null).apply(null,o)})}function ge(){let e=Symbol("Singular"),t={registry:{}},r=j.bind(null,t,e);return I(r,t,e),r}function me(){let e={registry:{}},t=j.bind(null,e);return I(t,e),t}var F={Singular:ge,Collection:me};var be="0.0.0-development",ye=`octokit-endpoint.js/${be} ${h()}`,we={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":ye},mediaType:{format:""}};function ve(e){return e?Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{}):{}}function je(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(e)}function V(e,t){let r=Object.assign({},e);return Object.keys(t).forEach(s=>{je(t[s])?s in e?r[s]=V(e[s],t[s]):Object.assign(r,{[s]:t[s]}):Object.assign(r,{[s]:t[s]})}),r}function H(e){for(let t in e)e[t]===void 0&&delete e[t];return e}function $(e,t,r){if(typeof t=="string"){let[n,o]=t.split(" ");r=Object.assign(o?{method:n,url:o}:{url:n},r)}else r=Object.assign({},t);r.headers=ve(r.headers),H(r),H(r.headers);let s=V(e||{},r);return r.url==="/graphql"&&(e&&e.mediaType.previews?.length&&(s.mediaType.previews=e.mediaType.previews.filter(n=>!s.mediaType.previews.includes(n)).concat(s.mediaType.previews)),s.mediaType.previews=(s.mediaType.previews||[]).map(n=>n.replace(/-preview/,""))),s}function Ee(e,t){let r=/\?/.test(e)?"&":"?",s=Object.keys(t);return s.length===0?e:e+r+s.map(n=>n==="q"?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${n}=${encodeURIComponent(t[n])}`).join("&")}var Oe=/\{[^}]+\}/g;function Ae(e){return e.replace(/^\W+|\W+$/g,"").split(/,/)}function Te(e){let t=e.match(Oe);return t?t.map(Ae).reduce((r,s)=>r.concat(s),[]):[]}function L(e,t){let r={__proto__:null};for(let s of Object.keys(e))t.indexOf(s)===-1&&(r[s]=e[s]);return r}function W(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t}).join("")}function b(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function y(e,t,r){return t=e==="+"||e==="#"?W(t):b(t),r?b(r)+"="+t:t}function m(e){return e!=null}function T(e){return e===";"||e==="&"||e==="?"}function $e(e,t,r,s){var n=e[r],o=[];if(m(n)&&n!=="")if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")n=n.toString(),s&&s!=="*"&&(n=n.substring(0,parseInt(s,10))),o.push(y(t,n,T(t)?r:""));else if(s==="*")Array.isArray(n)?n.filter(m).forEach(function(i){o.push(y(t,i,T(t)?r:""))}):Object.keys(n).forEach(function(i){m(n[i])&&o.push(y(t,n[i],i))});else{let i=[];Array.isArray(n)?n.filter(m).forEach(function(a){i.push(y(t,a))}):Object.keys(n).forEach(function(a){m(n[a])&&(i.push(b(a)),i.push(y(t,n[a].toString())))}),T(t)?o.push(b(r)+"="+i.join(",")):i.length!==0&&o.push(i.join(","))}else t===";"?m(n)&&o.push(b(r)):n===""&&(t==="&"||t==="?")?o.push(b(r)+"="):n===""&&o.push("");return o}function qe(e){return{expand:xe.bind(null,e)}}function xe(e,t){var r=["+","#",".","/",";","?","&"];return e=e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(s,n,o){if(n){let a="",l=[];if(r.indexOf(n.charAt(0))!==-1&&(a=n.charAt(0),n=n.substr(1)),n.split(/,/g).forEach(function(p){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(p);l.push($e(t,a,u[1],u[2]||u[3]))}),a&&a!=="+"){var i=",";return a==="?"?i="&":a!=="#"&&(i=a),(l.length!==0?a:"")+l.join(i)}else return l.join(",")}else return W(o)}),e==="/"?e:e.replace(/\/$/,"")}function B(e){let t=e.method.toUpperCase(),r=(e.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),s=Object.assign({},e.headers),n,o=L(e,["method","baseUrl","url","headers","request","mediaType"]),i=Te(r);r=qe(r).expand(o),/^http/.test(r)||(r=e.baseUrl+r);let a=Object.keys(e).filter(u=>i.includes(u)).concat("baseUrl"),l=L(o,a);if(!/application\/octet-stream/i.test(s.accept)&&(e.mediaType.format&&(s.accept=s.accept.split(/,/).map(u=>u.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(",")),r.endsWith("/graphql")&&e.mediaType.previews?.length)){let u=s.accept.match(/[\w-]+(?=-preview)/g)||[];s.accept=u.concat(e.mediaType.previews).map(c=>{let f=e.mediaType.format?`.${e.mediaType.format}`:"+json";return`application/vnd.github.${c}-preview${f}`}).join(",")}return["GET","HEAD"].includes(t)?r=Ee(r,l):"data"in l?n=l.data:Object.keys(l).length&&(n=l),!s["content-type"]&&typeof n<"u"&&(s["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(t)&&typeof n>"u"&&(n=""),Object.assign({method:t,url:r,headers:s},typeof n<"u"?{body:n}:null,e.request?{request:e.request}:null)}function Re(e,t,r){return B($(e,t,r))}function z(e,t){let r=$(e,t),s=Re.bind(null,r);return Object.assign(s,{DEFAULTS:r,defaults:z.bind(null,r),merge:$.bind(null,r),parse:B})}var G=z(null,we);var Q=de(M(),1);var g=class extends Error{name;status;request;response;constructor(t,r,s){super(t),this.name="HttpError",this.status=Number.parseInt(r),Number.isNaN(this.status)&&(this.status=0),"response"in s&&(this.response=s.response);let n=Object.assign({},s.request);s.request.headers.authorization&&(n.headers=Object.assign({},s.request.headers,{authorization:s.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),n.url=n.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=n}};var Se="0.0.0-development",Ue={headers:{"user-agent":`octokit-request.js/${Se} ${h()}`}};function ke(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(e)}async function X(e){let t=e.request?.fetch||globalThis.fetch;if(!t)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let r=e.request?.log||console,s=e.request?.parseSuccessResponseBody!==!1,n=ke(e.body)||Array.isArray(e.body)?JSON.stringify(e.body):e.body,o=Object.fromEntries(Object.entries(e.headers).map(([c,f])=>[c,String(f)])),i;try{i=await t(e.url,{method:e.method,body:n,redirect:e.request?.redirect,headers:o,signal:e.request?.signal,...e.body&&{duplex:"half"}})}catch(c){let f="Unknown Error";if(c instanceof Error){if(c.name==="AbortError")throw c.status=500,c;f=c.message,c.name==="TypeError"&&"cause"in c&&(c.cause instanceof Error?f=c.cause.message:typeof c.cause=="string"&&(f=c.cause))}let k=new g(f,500,{request:e});throw k.cause=c,k}let a=i.status,l=i.url,p={};for(let[c,f]of i.headers)p[c]=f;let u={url:l,status:a,headers:p,data:""};if("deprecation"in p){let c=p.link&&p.link.match(/<([^>]+)>; rel="deprecation"/),f=c&&c.pop();r.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${p.sunset}${f?`. See ${f}`:""}`)}if(a===204||a===205)return u;if(e.method==="HEAD"){if(a<400)return u;throw new g(i.statusText,a,{response:u,request:e})}if(a===304)throw u.data=await q(i),new g("Not modified",a,{response:u,request:e});if(a>=400)throw u.data=await q(i),new g(Pe(u.data),a,{response:u,request:e});return u.data=s?await q(i):i.body,u}async function q(e){let t=e.headers.get("content-type");if(!t)return e.text().catch(()=>"");let r=(0,Q.safeParse)(t);if(Ne(r)){let s="";try{return s=await e.text(),JSON.parse(s)}catch{return s}}else return r.type.startsWith("text/")||r.parameters.charset?.toLowerCase()==="utf-8"?e.text().catch(()=>""):e.arrayBuffer().catch(()=>new ArrayBuffer(0))}function Ne(e){return e.type==="application/json"||e.type==="application/scim+json"}function Pe(e){if(typeof e=="string")return e;if(e instanceof ArrayBuffer)return"Unknown error";if("message"in e){let t="documentation_url"in e?` - ${e.documentation_url}`:"";return Array.isArray(e.errors)?`${e.message}: ${e.errors.map(r=>JSON.stringify(r)).join(", ")}${t}`:`${e.message}${t}`}return`Unknown error: ${JSON.stringify(e)}`}function x(e,t){let r=e.defaults(t);return Object.assign(function(n,o){let i=r.merge(n,o);if(!i.request||!i.request.hook)return X(r.parse(i));let a=(l,p)=>X(r.parse(r.merge(l,p)));return Object.assign(a,{endpoint:r,defaults:x.bind(null,r)}),i.request.hook(a,i)},{endpoint:r,defaults:x.bind(null,r)})}var v=x(G,Ue);var Ce="0.0.0-development";function De(e){return`Request failed due to following response errors:
`+e.errors.map(t=>` - ${t.message}`).join(`
`)}var _e=class extends Error{constructor(e,t,r){super(De(r)),this.request=e,this.headers=t,this.response=r,this.errors=r.errors,this.data=r.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},Ie=["method","baseUrl","url","headers","request","query","mediaType","operationName"],Fe=["query","method","url"],Y=/\/api\/v3\/?$/;function He(e,t,r){if(r){if(typeof t=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let i in r)if(Fe.includes(i))return Promise.reject(new Error(`[@octokit/graphql] "${i}" cannot be used as variable name`))}let s=typeof t=="string"?Object.assign({query:t},r):t,n=Object.keys(s).reduce((i,a)=>Ie.includes(a)?(i[a]=s[a],i):(i.variables||(i.variables={}),i.variables[a]=s[a],i),{}),o=s.baseUrl||e.endpoint.DEFAULTS.baseUrl;return Y.test(o)&&(n.url=o.replace(Y,"/api/graphql")),e(n).then(i=>{if(i.data.errors){let a={};for(let l of Object.keys(i.headers))a[l]=i.headers[l];throw new _e(n,a,i.data)}return i.data.data})}function R(e,t){let r=e.defaults(t);return Object.assign((n,o)=>He(r,n,o),{defaults:R.bind(null,r),endpoint:r.endpoint})}var pt=R(v,{headers:{"user-agent":`octokit-graphql.js/${Ce} ${h()}`},method:"POST",url:"/graphql"});function ee(e){return R(e,{method:"POST",url:"/graphql"})}var S="(?:[a-zA-Z0-9_-]+)",te="\\.",re=new RegExp(`^${S}${te}${S}${te}${S}$`),Le=re.test.bind(re);async function Ve(e){let t=Le(e),r=e.startsWith("v1.")||e.startsWith("ghs_"),s=e.startsWith("ghu_");return{type:"token",token:e,tokenType:t?"app":r?"installation":s?"user-to-server":"oauth"}}function We(e){return e.split(/\./).length===3?`bearer ${e}`:`token ${e}`}async function Be(e,t,r,s){let n=t.endpoint.merge(r,s);return n.headers.authorization=We(e),t(n)}var ne=function(t){if(!t)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof t!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return t=t.replace(/^(token|bearer) +/i,""),Object.assign(Ve.bind(null,t),{hook:Be.bind(null,t)})};var U="6.1.3";var se=()=>{},ze=console.warn.bind(console),Ge=console.error.bind(console),ie=`octokit-core.js/${U} ${h()}`,oe=class{static VERSION=U;static defaults(t){return class extends this{constructor(...s){let n=s[0]||{};if(typeof t=="function"){super(t(n));return}super(Object.assign({},t,n,n.userAgent&&t.userAgent?{userAgent:`${n.userAgent} ${t.userAgent}`}:null))}}}static plugins=[];static plugin(...t){let r=this.plugins;return class extends this{static plugins=r.concat(t.filter(n=>!r.includes(n)))}}constructor(t={}){let r=new F.Collection,s={baseUrl:v.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(s.headers["user-agent"]=t.userAgent?`${t.userAgent} ${ie}`:ie,t.baseUrl&&(s.baseUrl=t.baseUrl),t.previews&&(s.mediaType.previews=t.previews),t.timeZone&&(s.headers["time-zone"]=t.timeZone),this.request=v.defaults(s),this.graphql=ee(this.request).defaults(s),this.log=Object.assign({debug:se,info:se,warn:ze,error:Ge},t.log),this.hook=r,t.authStrategy){let{authStrategy:o,...i}=t,a=o(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:i},t.auth));r.wrap("request",a.hook),this.auth=a}else if(!t.auth)this.auth=async()=>({type:"unauthenticated"});else{let o=ne(t.auth);r.wrap("request",o.hook),this.auth=o}let n=this.constructor;for(let o=0;o<n.plugins.length;++o)Object.assign(this,n.plugins[o](this,t))}request;graphql;log;hook;auth};export{oe as Octokit};
//# sourceMappingURL=core.bundle.mjs.map
